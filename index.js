console['clear'](),require('./settings/config');const {default:makeWASocket,useMultiFileAuthState,DisconnectReason,fetchLatestBaileysVersion,generateForwardMessageContent,prepareWAMessageMedia,generateWAMessageFromContent,generateMessageID,downloadContentFromMessage,makeCacheableSignalKeyStore,makeInMemoryStore,jidDecode,proto,Browsers,getAggregateVotesInPollMessage,PHONENUMBER_MCC}=require('@whiskeysockets/baileys'),chalk=require('chalk'),pino=require('pino'),{Boom}=require('@hapi/boom'),fs=require('fs'),FileType=require('file-type'),readline=require('readline'),qrcode=require('qrcode-terminal'),PhoneNumber=require('awesome-phonenumber'),path=require('path'),NodeCache=require('node-cache'),axios=require('axios'),{smsg,isUrl,generateMessageTag,getBuffer,getSizeMedia,fetchJson,sleep}=require('./system/storage.js'),{imageToWebp,videoToWebp,writeExifImg,writeExifVid,addExif}=require('./system/exif.js'),usePairingCode=!![];function question(_0x3a751c){const _0x24f901=readline['createInterface']({'input':process['stdin'],'output':process['stdout']});return new Promise(_0x4aea5a=>_0x24f901['question'](_0x3a751c,_0x49934a=>{_0x24f901['close'](),_0x4aea5a(_0x49934a);}));}async function connectToWhatsApp(){const {state:_0x65551a,saveCreds:_0x9a1b9c}=await useMultiFileAuthState('./session'),_0x2c4687=makeWASocket({'printQRInTerminal':!usePairingCode,'browser':Browsers['windows']('Chrome'),'syncFullHistory':![],'markOnlineOnConnect':!![],'logger':pino({'level':'silent'}),'auth':{'creds':_0x65551a['creds'],'keys':makeCacheableSignalKeyStore(_0x65551a['keys'],pino()['child']({'level':'silent','stream':'store'}))}});if(usePairingCode&&!_0x2c4687['authState']['creds']['registered']){console['log'](chalk['yellow']('Please\x20type\x20your\x20WhatsApp\x20number\x20for\x20pairing\x20code.'));const _0x396742=await question(chalk['green']('Enter\x20Number:\x20')),_0x4573da=await _0x2c4687['requestPairingCode'](_0x396742['trim']());console['log'](chalk['cyan']('Your\x20Pairing\x20Code:'),chalk['bold']['bgGreen']['white']('\x20'+_0x4573da+'\x20')),console['log'](chalk['yellow']('Enter\x20this\x20code\x20on\x20your\x20phone\x20in\x20>\x20settings\x20>\x20Linked\x20Devices.'));}_0x2c4687['decodeJid']=_0x3fb899=>{if(!_0x3fb899)return _0x3fb899;if(/:\d+@/gi['test'](_0x3fb899)){let _0x3a5b2f=jidDecode(_0x3fb899)||{};return _0x3a5b2f['user']&&_0x3a5b2f['server']&&_0x3a5b2f['user']+'@'+_0x3a5b2f['server']||_0x3fb899;}else return _0x3fb899;},_0x2c4687['ev']['on']('group-participants.update',async _0x40d73e=>{try{const _0x4e704c='./system/welcome_db.json';if(!fs['existsSync'](_0x4e704c))return;const _0x3c29d0=JSON['parse'](fs['readFileSync'](_0x4e704c,'utf8')),_0x1fbadb=_0x40d73e['id'];if(_0x3c29d0[_0x1fbadb]&&_0x40d73e['action']==='add')for(const _0x132630 of _0x40d73e['participants']){let _0x218afc;try{_0x218afc=await _0x2c4687['profilePictureUrl'](_0x132630,'image');}catch{_0x218afc='https://telegra.ph/file/2e0ca2c35efe2e7c9cd24.jpg';}const _0x22af52='Hello\x20@'+_0x132630['split']('@')[0x0]+'!\x20Welcome\x20to\x20the\x20group!\x20We\x27re\x20glad\x20to\x20have\x20you\x20here.\x20✨\x0a>\x20ᴍɪᴄʜɪᴋᴏ-ᴍᴅ\x20ʙʏ\x20ᴍʀ\x20sʜᴇғᴢʏ\x20😎';await _0x2c4687['sendMessage'](_0x1fbadb,{'image':{'url':_0x218afc},'caption':_0x22af52,'mentions':[_0x132630]});}}catch(_0x32133c){console['error']('Welcome\x20Handler\x20Error:',_0x32133c);}}),_0x2c4687['ev']['on']('creds.update',_0x9a1b9c),_0x2c4687['ev']['on']('messages.upsert',async _0x4c0b02=>{const _0x5c4ad5=_0x4c0b02['messages'][0x0];if(global['autoStatusView']&&_0x5c4ad5['key']&&_0x5c4ad5['key']['remoteJid']==='status@broadcast')try{await _0x2c4687['readMessages']([_0x5c4ad5['key']]),await _0x2c4687['sendMessage'](_0x5c4ad5['key']['remoteJid'],{'react':{'text':'👍','key':_0x5c4ad5['key']}});}catch(_0x40c749){console['error'](chalk['red']('[Auto\x20Status\x20Error]'),_0x40c749);}}),_0x2c4687['getFile']=async(_0x2aa1fc,_0x41c930)=>{let _0x36254d,_0x56ccaa=Buffer['isBuffer'](_0x2aa1fc)?_0x2aa1fc:/^data:.*?\/.*?;base64,/i['test'](_0x2aa1fc)?Buffer['from'](_0x2aa1fc['split']`,`[0x1],'base64'):/^https?:\/\//['test'](_0x2aa1fc)?await(_0x36254d=await getBuffer(_0x2aa1fc)):fs['existsSync'](_0x2aa1fc)?(_0x72281f=_0x2aa1fc,fs['readFileSync'](_0x2aa1fc)):typeof _0x2aa1fc==='string'?_0x2aa1fc:Buffer['alloc'](0x0),_0x2d34a1=await FileType['fromBuffer'](_0x56ccaa)||{'mime':'application/octet-stream','ext':'.bin'},_0x72281f=path['join'](__dirname,'../'+new Date()*0x1+'.'+_0x2d34a1['ext']);if(_0x56ccaa&&_0x41c930)fs['promises']['writeFile'](_0x72281f,_0x56ccaa);return{'res':_0x36254d,'filename':_0x72281f,'size':await getSizeMedia(_0x56ccaa),..._0x2d34a1,'data':_0x56ccaa};},_0x2c4687['downloadMediaMessage']=async _0x5bdae3=>{let _0xd2811d=(_0x5bdae3['msg']||_0x5bdae3)['mimetype']||'',_0x1a0128=_0x5bdae3['mtype']?_0x5bdae3['mtype']['replace'](/Message/gi,''):_0xd2811d['split']('/')[0x0];const _0x273411=await downloadContentFromMessage(_0x5bdae3,_0x1a0128);let _0x357260=Buffer['from']([]);for await(const _0xd902cd of _0x273411){_0x357260=Buffer['concat']([_0x357260,_0xd902cd]);}return _0x357260;},_0x2c4687['sendText']=(_0x3189ea,_0x499435,_0xcb6f1='',_0xbac103)=>_0x2c4687['sendMessage'](_0x3189ea,{'text':_0x499435,..._0xbac103},{'quoted':_0xcb6f1}),_0x2c4687['sendImageAsSticker']=async(_0x1d7f3d,_0x5297ef,_0xd1eb10,_0x2f0faf={})=>{let _0x1c9b76=Buffer['isBuffer'](_0x5297ef)?_0x5297ef:/^data:.*?\/.*?;base64,/i['test'](_0x5297ef)?Buffer['from'](_0x5297ef['split']`,`[0x1],'base64'):/^https?:\/\//['test'](_0x5297ef)?await await getBuffer(_0x5297ef):fs['existsSync'](_0x5297ef)?fs['readFileSync'](_0x5297ef):Buffer['alloc'](0x0),_0x35f3ad=await writeExifImg(_0x1c9b76,_0x2f0faf);return await _0x2c4687['sendMessage'](_0x1d7f3d,{'sticker':{'url':_0x35f3ad},..._0x2f0faf},{'quoted':_0xd1eb10}),_0x35f3ad;},_0x2c4687['sendVideoAsSticker']=async(_0x9f70b4,_0x532edf,_0x1805c3,_0x35ac57={})=>{let _0x588ba8=Buffer['isBuffer'](_0x532edf)?_0x532edf:/^data:.*?\/.*?;base64,/i['test'](_0x532edf)?Buffer['from'](_0x532edf['split']`,`[0x1],'base64'):/^https?:\/\//['test'](_0x532edf)?await await getBuffer(_0x532edf):fs['existsSync'](_0x532edf)?fs['readFileSync'](_0x532edf):Buffer['alloc'](0x0),_0x1e7b41=await writeExifVid(_0x588ba8,_0x35ac57);return await _0x2c4687['sendMessage'](_0x9f70b4,{'sticker':{'url':_0x1e7b41},..._0x35ac57},{'quoted':_0x1805c3}),_0x1e7b41;},_0x2c4687['downloadAndSaveMediaMessage']=async(_0x7aaff8,_0x4a09ca,_0xa49797=!![])=>{let _0x5ec166=_0x7aaff8['msg']?_0x7aaff8['msg']:_0x7aaff8,_0x17b3aa=(_0x7aaff8['msg']||_0x7aaff8)['mimetype']||'',_0x630c2f=_0x7aaff8['mtype']?_0x7aaff8['mtype']['replace'](/Message/gi,''):_0x17b3aa['split']('/')[0x0];const _0x4ecf83=await downloadContentFromMessage(_0x5ec166,_0x630c2f);let _0x185d8f=Buffer['from']([]);for await(const _0x723516 of _0x4ecf83){_0x185d8f=Buffer['concat']([_0x185d8f,_0x723516]);}let _0x18240d=await FileType['fromBuffer'](_0x185d8f),_0x1bcd81=_0xa49797?_0x4a09ca+'.'+_0x18240d['ext']:_0x4a09ca;return await fs['writeFileSync'](_0x1bcd81,_0x185d8f),_0x1bcd81;},_0x2c4687['public']=!![],_0x2c4687['ev']['on']('messages.upsert',async _0x6abcd5=>{const _0x2b91e2=_0x6abcd5['messages'][0x0];if(!_0x2b91e2['message']||_0x2b91e2['key']['remoteJid']==='status@broadcast')return;const _0x46ce52=smsg(_0x2c4687,_0x2b91e2);require('./menu/shefzy.js')(_0x2c4687,_0x46ce52,_0x6abcd5);}),_0x2c4687['ev']['on']('connection.update',_0x2618fd=>{const {connection:_0x4e43fb,lastDisconnect:_0x1f3bd9}=_0x2618fd;if(_0x4e43fb==='close'){const _0x314e4d=_0x1f3bd9['error']?.['output']?.['statusCode'],_0xb8e87e=_0x314e4d!==DisconnectReason['loggedOut'];console['log'](chalk['red']('Connection\x20closed.\x20Reconnecting:\x20'+_0xb8e87e)),_0xb8e87e&&connectToWhatsApp();}else{if(_0x4e43fb==='open'){console['log'](chalk['green']('✅\x20Success!\x20Connection\x20established.\x20Bot\x20is\x20online.'));try{const _0x426694=JSON['parse'](fs['readFileSync']('./system/owner.json')),_0x51644d=_0x426694[0x0]?_0x426694[0x0]+'@s.whatsapp.net':null;_0x51644d&&_0x2c4687['sendMessage'](_0x51644d,{'text':'Mr\x20Shefzy\x20Michiko\x20MD\x20Is\x20Connected!😉'});}catch(_0xfec2c5){console['error']('Could\x20not\x20send\x20startup\x20message:',_0xfec2c5);}}}}),_0x2c4687['ev']['on']('creds.update',_0x9a1b9c);}connectToWhatsApp();